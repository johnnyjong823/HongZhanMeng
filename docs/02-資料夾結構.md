# 資料夾結構說明

## 專案根目錄結構

```
HongZhanMeng2/
├── public/                     # 公開目錄 (網站根目錄指向此處)
│   ├── index.php              # 應用程式入口點
│   ├── .htaccess              # Apache URL 重寫規則
│   ├── assets/                # 靜態資源
│   │   ├── css/              # CSS 樣式檔
│   │   ├── js/               # JavaScript 檔案
│   │   ├── images/           # 圖片資源
│   │   └── fonts/            # 字型檔案
│   └── uploads/               # 上傳檔案目錄
│
├── app/                        # 應用程式核心
│   ├── Controllers/           # 控制器
│   │   ├── Frontend/         # 前台控制器
│   │   │   └── HomeController.php
│   │   ├── Backend/          # 後台控制器
│   │   │   ├── DashboardController.php
│   │   │   ├── UserController.php
│   │   │   ├── RoleController.php
│   │   │   └── FunctionController.php
│   │   └── AccountController.php  # 帳號相關控制器
│   │
│   ├── Models/                # 資料模型
│   │   ├── User.php          # 使用者模型
│   │   ├── Role.php          # 權限模型
│   │   ├── FunctionModel.php # 功能模型
│   │   ├── ActionLog.php     # 操作紀錄模型
│   │   └── LoginLog.php      # 登入紀錄模型
│   │
│   ├── Views/                 # 視圖模板
│   │   ├── layouts/          # 版型
│   │   │   ├── frontend.php  # 前台版型
│   │   │   └── backend.php   # 後台版型
│   │   ├── frontend/         # 前台視圖
│   │   │   ├── home/
│   │   │   │   └── index.php
│   │   │   └── partials/     # 前台共用元件
│   │   ├── backend/          # 後台視圖
│   │   │   ├── dashboard/
│   │   │   │   └── index.php
│   │   │   ├── users/
│   │   │   │   ├── index.php
│   │   │   │   ├── create.php
│   │   │   │   └── edit.php
│   │   │   ├── roles/
│   │   │   ├── functions/
│   │   │   └── partials/     # 後台共用元件
│   │   ├── account/          # 帳號相關視圖
│   │   │   ├── login.php
│   │   │   ├── forgot-password.php
│   │   │   └── reset-password.php
│   │   └── errors/           # 錯誤頁面
│   │       ├── 404.php
│   │       ├── 403.php
│   │       └── 500.php
│   │
│   ├── Middleware/            # 中介層
│   │   ├── AuthMiddleware.php        # 登入驗證
│   │   ├── RoleMiddleware.php        # 權限驗證
│   │   └── SessionMiddleware.php     # Session 管理
│   │
│   ├── Filters/               # 過濾器
│   │   └── RecordActionFilter.php    # 操作紀錄過濾器
│   │
│   ├── Services/              # 服務層
│   │   ├── AuthService.php           # 認證服務
│   │   ├── PasswordService.php       # 密碼服務
│   │   └── MailService.php           # 郵件服務
│   │
│   └── Helpers/               # 輔助函式
│       ├── functions.php             # 全域函式
│       └── Validator.php             # 驗證器
│
├── core/                       # 框架核心
│   ├── App.php                # 應用程式類別
│   ├── Router.php             # 路由器
│   ├── Controller.php         # 基礎控制器
│   ├── Model.php              # 基礎模型
│   ├── View.php               # 視圖渲染器
│   ├── Database.php           # 資料庫連接
│   ├── Session.php            # Session 管理
│   └── Request.php            # 請求處理
│
├── config/                     # 設定檔
│   ├── app.php               # 應用程式設定
│   ├── database.php          # 資料庫設定
│   ├── routes.php            # 路由設定
│   └── mail.php              # 郵件設定
│
├── database/                   # 資料庫相關
│   ├── migrations/           # 資料庫遷移檔
│   │   ├── 001_create_users_table.sql
│   │   ├── 002_create_roles_table.sql
│   │   ├── 003_create_functions_table.sql
│   │   ├── 004_create_user_roles_table.sql
│   │   ├── 005_create_role_functions_table.sql
│   │   ├── 006_create_action_logs_table.sql
│   │   └── 007_create_login_logs_table.sql
│   └── seeds/                # 資料庫種子資料
│       ├── roles_seeder.sql
│       └── admin_seeder.sql
│
├── storage/                    # 儲存目錄
│   ├── logs/                 # 系統日誌
│   ├── cache/                # 快取檔案
│   └── sessions/             # Session 檔案
│
├── docs/                       # 文件目錄
│
├── vendor/                     # 第三方套件 (Composer，選用)
│
├── .htaccess                  # 根目錄重寫規則
├── composer.json              # Composer 設定 (選用)
└── README.md                  # 專案說明
```

---

## 目錄權限設定

在 cPanel 或 FTP 上傳後，需要設定以下目錄權限：

```bash
# 可寫入目錄 (755 或 775)
chmod 755 storage/
chmod 755 storage/logs/
chmod 755 storage/cache/
chmod 755 storage/sessions/
chmod 755 public/uploads/
```

---

## 主要檔案說明

### public/index.php
應用程式入口點，所有請求都會經過此檔案。

```php
<?php
/**
 * 應用程式入口點
 */

// 定義根目錄
define('ROOT_PATH', dirname(__DIR__));

// 載入自動載入器
require_once ROOT_PATH . '/core/Autoloader.php';

// 載入設定
$config = require ROOT_PATH . '/config/app.php';

// 啟動應用程式
$app = new Core\App($config);
$app->run();
```

### public/.htaccess
Apache URL 重寫規則。

```apache
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    
    # 如果是真實檔案或目錄，直接存取
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # 其他請求導向 index.php
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule>

# 設定 PHP
<IfModule mod_php.c>
    php_value upload_max_filesize 64M
    php_value post_max_size 64M
    php_value max_execution_time 120
    php_value memory_limit 256M
</IfModule>
```

### 根目錄 .htaccess
禁止直接存取非 public 目錄。

```apache
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule>
```

---

## 命名規範

### 檔案命名
| 類型 | 命名規則 | 範例 |
|------|----------|------|
| Controller | PascalCase + Controller | UserController.php |
| Model | PascalCase | User.php |
| View | kebab-case | user-list.php |
| 設定檔 | lowercase | database.php |
| Migration | 編號_描述 | 001_create_users_table.sql |

### 類別命名
| 類型 | 命名規則 | 範例 |
|------|----------|------|
| Class | PascalCase | UserController |
| Method | camelCase | getUserById |
| Property | camelCase | $userName |
| Constant | UPPER_SNAKE | MAX_LOGIN_ATTEMPTS |

### 資料庫命名
| 類型 | 命名規則 | 範例 |
|------|----------|------|
| Table | PascalCase | AcUsers |
| Column | snake_case | created_at |
| Primary Key | id | id |
| Foreign Key | 表名_id | user_id |
